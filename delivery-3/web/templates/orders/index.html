{% extends 'index_base.html' %}

{% block orders_active %}active fade{% endblock %}

{% block header %}
<h1>{% block title %}Orders{% endblock %}</h1>
<a class="btn icon-btn" href="{{ url_for('order_create') }}">
    <i class="bi bi-plus-lg plus-icon"></i>
    New
</a>
{% endblock %} 

{% block content %} 
{% for order in orders %}
<article class="post">
    <header>
        <div>
            <h1>Order {{ order['order_no'] }}</h1>
        </div>
        {% if not order['paid_by'] %}
        <form class="pay-form" action="{{ url_for('order_pay', order_no=order['order_no']) }}" method="post">
            <button class="btn icon-btn" id="paid" onclick="return confirm('Customer {{ order['cust_no'] }}, pay order {{ order['order_no'] }}?')">
                <i class="bi bi-wallet2"></i>
                Pay
            </button>
        </form>
        {% endif %}
        <a class="btn icon-btn view-btn" href="{{ url_for('order_view', order_no=order['order_no']) }}">
            <i class="bi bi-eye"></i>
            View
        </a>
    </header>
    <div class="info">
        <p class="body">
            <b>Order date:</b>
            {{ order['date'] }}
        </p>
        <p class="body">
            <b>Total:</b>
            {{ order['total'] }}â‚¬ ({{ order['product_qty'] }} {{ 'items' if order['product_qty'] > 1 else 'item' }})
        </p>
        <p class="body">
            <b>Paid:</b>
            {{ "Yes" if order['paid_by'] else "No"}}
        </p>
    </div>
</article>
{% if not loop.last %}
<hr>
{% endif %}
{% endfor %}
{% endblock %}


{% block prev_url %}{{ url_for('orders_index', page=page - 1) }}{% endblock %}
{% block next_url %}{{ url_for('orders_index', page=page + 1) }}{% endblock %}
